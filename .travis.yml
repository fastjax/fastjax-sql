# Copyright (c) 2018 OpenJAX
#
# Permission is hereby granted, free of charge, to any person obtaining a copy
# of this software and associated documentation files (the "Software"), to deal
# in the Software without restriction, including without limitation the rights
# to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
# copies of the Software, and to permit persons to whom the Software is
# furnished to do so, subject to the following conditions:
#
# The above copyright notice and this permission notice shall be included in
# all copies or substantial portions of the Software.
#
# You should have received a copy of The MIT License (MIT) along with this
# program. If not, see <http://opensource.org/licenses/MIT/>.

language: java
jdk:
- oraclejdk8
- oraclejdk11
install:
- cp settings.xml $HOME/.m2/settings.xml && rm -rf ~/.m2/repository/org/openjax
script:
- 'if [ "$TRAVIS_JDK_VERSION" = "oraclejdk8" ] &&
      [ "$TRAVIS_BRANCH" = "master" ] &&
      [ "$TRAVIS_PULL_REQUEST" = "false" ]; then
    sh -c "$SIGNING_KEY" | $GPG_EXECUTABLE --fast-import &> /dev/null &&
    mvn -e -U -DskipRTests -DrepoToken=$REPO_TOKEN clean deploy -P javadoc,report,deploy;
  else
    mvn -e -U -DskipRTests clean install;
  fi'
cache:
  directories:
    - ~/.m2/repository
env:
  global:
  - secure: LoogUKejjuXmcrHoT5m7tDFhTGK+mnPl77aUeGQDnMxG+++0mkuFsvBe+TZtGtuZhyLemb88kPkEU7BHMy+0AVc3qfdWNB8pASqltQzD2gJ03IKUCm0pZvlgBREtx97G8UxLIEB2jFeMuwzTNEFuQYRJBdg+UbOuMFDkc26iVjLIvyP35oA3sRgDqPr1hHzGhaDMuCGOSxovkeDpxX1mbqqPsK5PNskPe8duT6xQeRBbXxk92B25i/mJlM4mZ7ZPZV7afl7fvR5Bk/YNWL4GiN7fAQU45dLwE5MTIe0L9bnvXmsOL9CiK2SiPD5Rixe/e+UJ0iRz4n1g+jatja3jDEtD9f1njRetxj/S9HcgJSJqS6qarNREsvu8xsrB/iRe04TbsywVqX8WAUccszWjhIDj/Pa7pQvkDVpBGArg4X+WT9Z21UNPAVeINtxKc2H6NdKnjS/0dvv418TEp/YYIloMSxxxWZNauMZs+enZ8pT4ocELUsCGXlrya/Gar6twk1rXNUU7vtVHP5Es/TR+6otNEeet3kmOb3uDnYHIn5IxC8fLhpjGr68NM7uSo2N43P3srTsEjWyVga08OqYZjjwJUTuHZkVTtCmuqp5MmFYc9ka3q1D/7duxRBIzTPBDAzC21Foe1NDT6T4NE7SPlMfNAtTMs4BjYHbj6PPjebA=
  - secure: eeJtivtUL4JfZL117VybVjn0W4wB5VELNl6PeIwQdAg3JWo00KnBny3uO5SfHdyPkVhUsSfKIqJ9LnxKEqP30hp9KmjqkbvlS5a6opa05hmEASJy4uV2fUM/zqI0OO5K1qq9xm76RRqNxAk7VGOkOp/0ytvmaf23k77Fg5ke+h6dF5EENJkxg3guB9jJwBKd/pgvZI8DMkPR2h6nUh70GOf3vSB7fOgc8QQn9jbQF2GhUfat7h+QRAjqwV6WN+G3O23zvp6dbmFJ0tqJFhZRet0Tz49AMntbNDCMLJFRWk3gWF6AjvhcILn4NpagsQttGqA1Fo+m7bpIBQhNQfAgWqoCgB5twHLrCJlVY/xkXDST7eZBh+E7waD/QeLdW4rOmbYKQoErXeUK7UDbb9QAwA2PLHuO7XNE1joSVySdns6EAjxHtLShxI0Fl+srpEvYJzD6FWKTMtaEwFNFbQG1tDI6X/88962Dqu4H40RoO7rgT4frZ8WTwD/PzoC22exNr0VEoWIWTOBoCqRmVuwCxf8jcmXgjeIJU1sZjFmUay9ESQfCOeYjvaQ6pVBtjPsH5C8IRRHMysAJQcg97qMT6fqnwS3jyyNGwU9k69Kq6RfvAo18tArA9f7YwTR2dgTd8oOgVPX6HzrPB9ul7v0KMaoR5OWqSsgyE119R6Pl1yU=
  - secure: tTRS5BDmb8eAX9ZNUccwFTVa6KPvog/xhA70id2WXn0PRNV9neDGFAI7Wh5WivkmOSlHWa6bi94qe8vwSIYTcaYLxUcEpp/VqN4QnsGFx54V9qNvemZi99MRVyNvJZmJh380TmZlm/IoIAe77mb5V61smKXW8vpF6ZWaP8ctHYkmzoPXdAf+w98tIOEpK0MF/53xGCXq81H5JALeDQTSBuF9TGoR6xP+fP7Y8P29+as1vKQJ/Y/0EZMfPoMUfN9mp3HzZjp/0ZB53PB+NOPBWff1aUt3uksydy4x5cLAM8FG27V4qXoY7YTJtoEHvjQceXdwFAOSHWZkF2XUG/cAu7QqqiGFlOyntQuyL/M5bbfHMzGqigLo0fPs/KZIla2Y5+fM7TkNrnSsDhNUcdQ5n/GkIbcCLwKpC9nesllyNdSLHWzJVu3SF/Nm3e7oWncBP8Gsm8QOuvrNHcV2G+aYRxabCcyuwNHYiDXTEslJIQCY5aVMsu4xadd6dHSmRkTkeQBXWp1xZow3quEruHnQt15GeirOpbtrtkZCGRpMH4HhTxBtHkPiScPWOXYViTApBr2OcgqkUhopldAaKds8q7QfDnGyjnkA6Y60gDYt/AoLvbd6Lq3m9BleceDIji7YZPF1krGJKJTuiedx6/+6k8wZOgPeC37JoXFlIG7xXao=
  - secure: Z9H4iaumucsVGiX+Vm7QWsstYgLzXCaaUPsd1ZB97oRIPlB5kFtlfeQ6GAqE5Wnw8AIfhbkQJg5ARX/BpXRsTjZh/pckwg05A50dCqZQrh+BBHGKi2L/TNNwHCVj0/oE3fRT5ByOz6+GyGtPj/525guMnIWkT2r0/d5JZEzUApScMNT2RGecCgh5uciYddGcF4FWIoiH52kacO1dvSHHRq6cdr3xi4tJp1JzUTig08uad/de8zbPXv6YYwAu2vbBUfFGFrIp3vM30FAUQjdV0MLMYawnRcScUgYkS42M7I/I+FZityLW0kTnVK7dyg6LH7+Wk70v77SzS4drbNAOK0pGwyrvcTehcQyRMyS/8b5akpxc7T8wBrlda4XIq1wmDbep9gI3WkP23buZvvdXtPYJxrmSIfeFQeuLWaUkZYwVVteosUKXCYUgUZAoiLh1xUe0rQH3I/Gj7SvdCAVXdsU6mX3RdKML1XfrDUEy8yLPytFbH593724v3b6Aj5xDxjuMW18czosaBhCQTs2E9Uc353PMfLTJPex0HU8PUr+fXbIiXgmP3drMRYTUoLuJIsTxAJP81LftuM0vFMx8dO/SLV6oEiSb4cUxdoejGMZ8eHvz3BOqlBC26va32F0Af2mlA/OqCX2/5FOFjvkAavFsfprvxpFg9nmG8gwxg3E=
  - secure: l1V//9Ocr0pTSdrkCbrEICAJ8j9kA96KitnBgRG2RW0FMppOZ4yn0UvEl41tnJUBcfp+AJvQqHgjxnAemU6o5xpDAaiB3+9BQ4YGndbaNXK2Mign2Z8tV1VG5aarrG4xeAPb4N84rtCnoUxHuFNBzTEYKZ3XjT9g2Y6UXapTofcIJqL5rIqY/Xba/UBLx69jRpW0JK06uceKc07M3KnuQkWOtVeOKvmXEbCkj4xXDl0Xe3MsybNVknbastc4gGxM55W3toqgyDMxgbityLcibucPtnuC4hppzdnGIj0togwSjMHPCdmEp+gKJKMsjEE8g2J0wvmElCYuWLZs+LCB6FBo/vQrLAgFU7LT9rmHj46XpsenFbG/NMhUU/63QPUyoIiWCCaGRZpFjXgJMF/h0b/fC0w4zYVM94GHaAqB/JyC1EpjjDoYIqaeEWyVweoDLei5vZHys4gv7HDcF8KfrZR5VkpAmSEsYrY0ksO2U+/oVPL9conww7brzLQAzlDSyRD12e/WA9LM0mQnxoKbNX7MKoJ4F9ck8ozGs0e+AVCUkKSHU+VlmpyR/IQ+bVnZfR9E7RrqCJyrKl3yv0YQfM0WHOyhbeP8gL9skK967+7CkjfQ8Uo1wjItQkOKzIicvrXyl1mfFZ3j9mfNaHcqh45JlYzJ4hcOTlsDTr8ACVU=
  - secure: Pey7prYn7dvIhOP7wlc+9FtMPY7uFDHNf1EMb4JGyRTExdxZ5SROxCRO6TJtWd+tZZ88KKnrMDKSSGIlS0SLVejQMUdhUn+NQ/MBQ/1/esP0tsLUBh52WBgTfjRbi7OEp09ZfQUefoDK2MHyFJev76+yvZ3Mzow2nTeCodjXPe4o1pN+hgpoojtwHgxzO4/aQy15X+8jqKsUfNQY51mDdu4NfWKYEyqpZpUBkcMs3oTcRqjZCsPsNgMTL4xygultk9g2qu2maHATZPyzXv9xhu4DjQg4b11o3Sk/0c4ES54dlRtB1+p+KSc/DSxO3J4mi9DxhphvcCbAtUo+MKuXZXda8o5013RRyh95oqwuz8kG/O3WeDQeuf6o9fEYG5obutUQ6/LWPs7hACFWe8t4dZDrzwZlVD0rpE/pt31nG/FqdH+QNe70itvVOcD0j6gCvp0oyiBlibMNvdY9rmTIS3xoGoAioAGBtUKGSm6BxDLsiI3+E0/97B/T0zsBrd/5e3WC4QMf0mWPLNl/uiFFJrluFFCHJFVsp1P+1uy6Yye+KnTIwVucOQPXJDfldaYhXH1QQvDqthwEuIC9Wm4hf+PYWiW7+oB4jiOZaPNAoRIWlXm/sWnfTFQTF8Rr038upc5QMIA6fW/EVOXnu+T+ivCYRC2NFI1stgINhxdvjH0=
  - secure: KCiWqEpiweyG6NRIMZK8Z2KGkKbfDCMBiDOtr6u2bdWxVcopLhucSc76lCPfpKShx71xJA2SH8BU6XVaC6bjM7dSKsm1msYITWjiNcO4P2tIWcTxQOPqvzcqHorgqmDOa7JefwfW1QojJ1rp6Eyo2Yw3mAxKOTfWwYdmr5X0eatJYWaV5uIdZvbnwU7zfke0OrVqO/I/WZBEOG8Qvy3S+Sp57uUUPEWy7A94b6FvSwuFOgi3lFSArDU1ISviRDOySaQok0zRuJ4wADRdEcBnxQX0OJQl3JJQeI2EWTSdofpyemYkNqwR5gGBNlaynR7wETywzeDhQ5RjjKJUR0wIAhWMLJCdkhskK6Qk5cSv7I9pk2Nu46UYdSGCd5n7Ez13slDLKtHNoMtq/W2+stEVwVG1Yb+/2OaEXMi1vJH77w712NxrTwTZm+7L3OsN7/2KxVH25iSHFw0XO0NzBTx2s4AOhhaCwnh3QN/k3jKLvtDIMT7g8ozoTtP0o8sQxoMG23lFBoUZomSpszgW98wu5yHl0KbQHtXg2G5cpYoI5/jHHRmpXE9T1d+HB98S5Gsy2yHQXFgqdouP/4/CCFCRmvYhQobFEtfWy5p/3weGXoIYCQGtNM064rjIJ3sxxSYwbKAQEtw4fpcoH8yn/gwRDWxiH7SKeemSixHfV/8zM1U=
